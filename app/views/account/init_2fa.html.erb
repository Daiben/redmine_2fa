<div id="init2FA">
  <%= form_tag(confirm_2fa_path, id: 'init2FAForm') do %>
    <%= render 'account/autologin' %>

    <center>
      <strong><%= t('redmine_2fa.second_authentications.init.instruction') %>:</strong>
    </center>

    <div id="init2FAFormAuthSources">
      <% Redmine2FA.active_protocols.each do |protocol| %>
        <div class="authSource">
          <%= radio_button_tag 'protocol', protocol, false, data: { protocol: protocol } %>
          <%= label_tag "protocol_#{protocol}", t("redmine_2fa.protocols.#{protocol}") %>
        </div>
      <% end %>
    </div>

  <% end %>
  <table>
    <% Redmine2FA.active_protocols.each do |protocol| %>
      <%= render "account/init_2fa/#{protocol}" %>
    <% end %>
  </table>
</div>

<script>
  $('input:radio[name="protocol"]').change(function () {
    if ($(this).is(':checked')) {
      var protocol = $(this).data('protocol');
      $('.instruction2FA').hide();
      $('.' + protocol + 'Instruction').show();
    }
  });
</script>

<% content_for :header_tags do %>
  <%= javascript_include_tag 'redmine_2fa', plugin: 'redmine_2fa' %>
  <%= stylesheet_link_tag 'redmine_2fa', plugin: 'redmine_2fa' %>
<% end %>
